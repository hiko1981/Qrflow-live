<!DOCTYPE html>
<html lang="da">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>QRFlow – Vælg Formål</title>
  <style>
    body { font-family: sans-serif; padding: 20px; background: #f5f5f5; }
    .option button {
      display: block; width: 100%; padding: 15px; margin: 5px 0;
      font-size: 18px; background: #00aaff; color: white;
      border: none; border-radius: 8px;
    }
    .option button:hover { background: #008ecc; }
    .hidden { display: none; }
    .back-button { background: #ccc !important; margin-top: 10px; }
  </style>
</head>
<body>
  <h1>QRFlow – Vælg Formål</h1>

  <div id="step1">
    <p>Hvad vil du bruge QRFlow til?</p>
    <div class="option">
      <button onclick="setPurpose('tyveri')">Tyverisikring</button>
      <button onclick="setPurpose('service')">Service eller logging</button>
      <button onclick="setPurpose('pant')">Pant- og retursystem</button>
    </div>
  </div>

  <div id="step2" class="hidden">
    <p>Hvilken type genstand?</p>
    <div class="option">
      <button onclick="setType('fast')">Fast genstand</button>
      <button onclick="setType('løs')">Løs genstand</button>
    </div>
    <button class="option back-button" onclick="reset()">Tilbage</button>
  </div>

  <div id="step3" class="hidden">
    <p>Hvem skal se dette eksempel?</p>
    <div class="option">
      <button onclick="goPreview('bruger')">Bruger</button>
      <button onclick="goPreview('admin')">Administrator</button>
      <button onclick="goPreview('tekniker')">Tekniker</button>
    </div>
    <button class="option back-button" onclick="reset()">Tilbage</button>
  </div>

  <script>
    let valg = {};

    function setPurpose(p) {
      valg.formaal = p;
      document.getElementById('step1').classList.add('hidden');
      document.getElementById('step2').classList.remove('hidden');
    }
    function setType(t) {
      valg.type = t;
      document.getElementById('step2').classList.add('hidden');
      document.getElementById('step3').classList.remove('hidden');
    }
    function goPreview(role) {
      valg.role = role;
      const url = `minisite.html?formaal=${valg.formaal}&type=${valg.type}&role=${valg.role}`;
      window.location.href = url;
    }
    function reset() {
      window.location.reload();
    }
  </script>
</body>
</html>